<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  </head>
  <body>
    <form action="booking.php" method="post">
      <h3>Please pick your seats?</h3>
      <input
        type="text"
        name="movie"
        value="AHF"
        hidden=""
        spellcheck="false"
        data-ms-editor="true"
      >
      <div class="seats seats-select">
        Standard Adult
        <select name="seatsSTA" id="seatsSTA">
          <option value="">Please Select</option>
          <option value="1" data-fullprice="21.5" data-discprice="16">1</option>
          <option value="2" data-fullprice="43" data-discprice="32">2</option>
          <option value="3" data-fullprice="64.5" data-discprice="48">3</option>
          <option value="4" data-fullprice="86" data-discprice="64">4</option>
          <option value="5" data-fullprice="107.5" data-discprice="80">5</option>
          <option value="6" data-fullprice="129" data-discprice="96">6</option>
          <option value="7" data-fullprice="150.5" data-discprice="112">7</option>
          <option value="8" data-fullprice="172" data-discprice="128">8</option>
          <option value="9" data-fullprice="193.5" data-discprice="144">9</option>
          <option value="10" data-fullprice="215" data-discprice="160">10</option>
        </select>
      </div>
      <div class="seats seats-select">
        Standard Concession
        <select name="seatsSTP" id="seatsSTP">
          <option value="">Please Select</option>
          <option value="1" data-fullprice="19" data-discprice="14.5">1</option>
          <option value="2" data-fullprice="38" data-discprice="29">2</option>
          <option value="3" data-fullprice="57" data-discprice="43.5">3</option>
          <option value="4" data-fullprice="76" data-discprice="58">4</option>
          <option value="5" data-fullprice="95" data-discprice="72.5">5</option>
          <option value="6" data-fullprice="114" data-discprice="87">6</option>
          <option value="7" data-fullprice="133" data-discprice="101.5">7</option>
          <option value="8" data-fullprice="152" data-discprice="116">8</option>
          <option value="9" data-fullprice="171" data-discprice="130.5">9</option>
          <option value="10" data-fullprice="190" data-discprice="145">10</option>
        </select>
      </div>
      <div class="seats seats-select">
        Standard Child
        <select name="seatsSTC" id="seatsSTC">
          <option value="">Please Select</option>
          <option value="1" data-fullprice="17.5" data-discprice="13">1</option>
          <option value="2" data-fullprice="35" data-discprice="26">2</option>
          <option value="3" data-fullprice="52.5" data-discprice="39">3</option>
          <option value="4" data-fullprice="70" data-discprice="52">4</option>
          <option value="5" data-fullprice="87.5" data-discprice="65">5</option>
          <option value="6" data-fullprice="105" data-discprice="78">6</option>
          <option value="7" data-fullprice="122.5" data-discprice="91">7</option>
          <option value="8" data-fullprice="140" data-discprice="104">8</option>
          <option value="9" data-fullprice="157.5" data-discprice="117">9</option>
          <option value="10" data-fullprice="175" data-discprice="130">10</option>
        </select>
      </div>
      <div class="seats seats-select">
        First Class Adult
        <select name="seatsFCA" id="seatsFCA">
          <option value="">Please Select</option>
          <option value="1" data-fullprice="31" data-discprice="25">1</option>
          <option value="2" data-fullprice="62" data-discprice="50">2</option>
          <option value="3" data-fullprice="93" data-discprice="75">3</option>
          <option value="4" data-fullprice="124" data-discprice="100">4</option>
          <option value="5" data-fullprice="155" data-discprice="125">5</option>
          <option value="6" data-fullprice="186" data-discprice="150">6</option>
          <option value="7" data-fullprice="217" data-discprice="175">7</option>
          <option value="8" data-fullprice="248" data-discprice="200">8</option>
          <option value="9" data-fullprice="279" data-discprice="225">9</option>
          <option value="10" data-fullprice="310" data-discprice="250">10</option>
        </select>
      </div>
      <div class="seats seats-select">
        First Class Concession
        <select name="seatsFCP" id="seatsFCP">
          <option value="">Please Select</option>
          <option value="1" data-fullprice="28" data-discprice="23.5">1</option>
          <option value="2" data-fullprice="56" data-discprice="47">2</option>
          <option value="3" data-fullprice="84" data-discprice="70.5">3</option>
          <option value="4" data-fullprice="112" data-discprice="94">4</option>
          <option value="5" data-fullprice="140" data-discprice="117.5">5</option>
          <option value="6" data-fullprice="168" data-discprice="141">6</option>
          <option value="7" data-fullprice="196" data-discprice="164.5">7</option>
          <option value="8" data-fullprice="224" data-discprice="188">8</option>
          <option value="9" data-fullprice="252" data-discprice="211.5">9</option>
          <option value="10" data-fullprice="280" data-discprice="235">10</option>
        </select>
      </div>
      <div class="seats seats-select">
        First Class Child
        <select name="seatsFCC" id="seatsFCC">
          <option value="">Please Select</option>
          <option value="1" data-fullprice="25" data-discprice="22">1</option>
          <option value="2" data-fullprice="50" data-discprice="44">2</option>
          <option value="3" data-fullprice="75" data-discprice="66">3</option>
          <option value="4" data-fullprice="100" data-discprice="88">4</option>
          <option value="5" data-fullprice="125" data-discprice="110">5</option>
          <option value="6" data-fullprice="150" data-discprice="132">6</option>
          <option value="7" data-fullprice="175" data-discprice="154">7</option>
          <option value="8" data-fullprice="200" data-discprice="176">8</option>
          <option value="9" data-fullprice="225" data-discprice="198">9</option>
          <option value="10" data-fullprice="250" data-discprice="220">10</option>
        </select>
      </div>
      <h3>Pick a Session</h3>
      <div class="movieSessions">
        <div class="button">
          <input
            type="radio"
            id="Mon"
            value="Mon-6pm"
            name="session"
            data-pricing="discountprice"
          >
          <label for="Mon">Mon - 6pm</label>
        </div>
        <div class="button">
          <input
            type="radio"
            id="Tue"
            value="Tue-6pm"
            name="session"
            data-pricing="fullprice"
          >
          <label for="Tue">Tue - 6pm</label>
        </div>
        <div class="button">
          <input
            type="radio"
            id="Sat"
            value="Sat-9pm"
            name="session"
            data-pricing="fullprice"
          >
          <label for="Sat">Sat - 9pm</label>
        </div>
        <div class="button">
          <input
            type="radio"
            id="Sun"
            value="Sun-9pm"
            name="session"
            data-pricing="fullprice"
          >
          <label for="Sun">Sun - 9pm</label>
        </div>
        <h3>Booking Details</h3>
        <div id="bookingDetails">
          <p>
            <label for="name">Name:</label>
            <input
              type="text"
              id="name"
              name="name"
              value=""
              required=""
            >
          </p>
          <p>
            <label for="email">Email:</label>
            <input
              type="email"
              id="email"
              name="email"
              value=""
              required=""
            >
          </p>
          <p>
            <label for="mobile">Mobile Num:</label>
            <input
              type="tel"
              id="mobile"
              name="mobile"
              pattern="[0-9]{4}[ ]][0-9]{3}[ ][0-9]{3}"
              placeholder="04nn nnn nnn"
              value=""
              required=""
            >
          </p>
          <p>
            <input
              id="submitBooking"
              type="submit"
              name="submit"
              value="Book"
            >
          </p>
        </div>
      </div>
      <h3>Booking Details</h3>
      <div id="bookingDetails">
        <p>
          <label for="name">Name:</label>
          <input
            type="text"
            id="name"
            name="name"
            value=""
            required=""
          >
        </p>
        <p>
          <label for="email">Email:</label>
          <input
            type="email"
            id="email"
            name="email"
            value=""
            required=""
          >
        </p>
        <p>
          <label for="mobile">Mobile Num:</label>
          <input
            type="tel"
            id="mobile"
            name="mobile"
            pattern="[0-9]{4}[ ]][0-9]{3}[ ][0-9]{3}"
            placeholder="04nn nnn nnn"
            value=""
            required=""
          >
        </p>
        <p>
          <input
            id="submitBooking"
            type="submit"
            name="submit"
            value="Book"
          >
        </p>
      </div>
    </div>
  </form>
  <div id="result"></div>
  <p>
    The value of the option selected is:
    <span class="output"></span>
  </p>
  <button onclick="getRadioButtonData()"> Check option</button>
  <script type="text/javascript">




// which movie is selected
function getMovieSession(){
    var selectedSession = document.getElementsByName('session');
        for (i=0; i<selectedSession.length; i++){
            if (selectedSession[i].checked){
                return selectedSession[i].value;
                
            }
            
        };
}



// add movie session to $_SESSION data
// how?
// or add it to POST data

// is the currently selected movie discounted
function getMoviePriceFlag(session){

    const radioElement = document.getElementById(session);
    const priceFlag = radioElement.getAttribute('data-pricing');
    //console.log(pricingValue);
    return priceFlag;
}




function getDiscountPrice(elementName){
    // get the discountprice data of the selected dropdown
    
    const selectElement = document.getElementById(elementName);
    const selectedIndex = selectElement.selectedIndex;
    const selectedOption = selectElement.options[selectedIndex];
    const fullPrice = selectedOption.getAttribute('data-discprice');
    return fullPrice;
}



function getFullPrice(elementName){
    // get the fullprice data
    const selectElement = document.getElementById(elementName);
    const selectedIndex = selectElement.selectedIndex;
    const selectedOption = selectElement.options[selectedIndex];
    const fullPrice = selectedOption.getAttribute('data-fullprice');
    return fullPrice;
}



function getPrices(){
    movieSession = getMovieSession();
    console.log(movieSession);
    console.log(getMoviePriceFlag(movieSession));
    console.log('Discount-price is: ' + getDiscountPrice('seatsSTA'));
    console.log('Full-price is: ' + getFullPrice('seatsSTA'));
}


/// get all the data from the radio buttons
function getRadioButtonData(){
    const radioButtons = document.getElementsByName('session');
    let selectedRadioButton, selectedValue, selectedPrice;

    // Loop through each radio button to find the selected one
    for (let i = 0; i < radioButtons.length; i++) {
    if (radioButtons[i].checked) {
        // Save the selected radio button and its value and pricing data
        selectedRadioButton = radioButtons[i];
        selectedValue = selectedRadioButton.value;
        selectedPrice = selectedRadioButton.getAttribute('data-pricing');
        break;
    }
    }

    console.log(selectedValue);        // the value of the selected radio button
    console.log(selectedPrice);
}
  </script>
</body>
</html>
